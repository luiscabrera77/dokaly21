(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{66:function(e,t,n){},76:function(e,t,n){"use strict";n.r(t);var r,a,c,i,s,o=n(2),u=n.n(o),l=n(51),d=n.n(l),j=(n(66),n(15)),b=n(58),h=n(87),m=n(88),x=n(86),f=n(57),O=n(7),p=n(9),v=n(52),g=n(53),y=n(42),w=new(function(){function e(){Object(v.a)(this,e)}return Object(g.a)(e,[{key:"getProfile",value:function(){return Object(y.a)(this.getToken())}},{key:"loggedIn",value:function(){var e=this.getToken();return!!e&&!this.isTokenExpired(e)}},{key:"isTokenExpired",value:function(e){try{return Object(y.a)(e).exp<Date.now()/1e3}catch(t){return!1}}},{key:"getToken",value:function(){return localStorage.getItem("id_token")}},{key:"login",value:function(e){localStorage.setItem("id_token",e),window.location.assign("/")}},{key:"logout",value:function(){localStorage.removeItem("id_token"),window.location.assign("/")}}]),e}()),k=n(0),N=function(e){e.preventDefault(),w.logout()},S=function(){return Object(k.jsx)("header",{className:"mb-4 py-2 align-center",children:Object(k.jsxs)("div",{className:"container flex-row justify-center align-center",children:[Object(k.jsx)(O.b,{to:"/",children:Object(k.jsx)("img",{src:"/DOKALY-LOGO.png",alt:"DOKALY HOME",style:{width:150}})}),Object(k.jsx)("nav",{className:"centered",children:w.loggedIn()?Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(O.b,{to:"/",children:"Home"}),Object(k.jsx)(O.b,{to:"/submit",className:"mt-3",children:"Contribute"}),Object(k.jsx)(O.b,{to:"/profile",children:"Me"}),Object(k.jsx)("a",{href:"/",onClick:N,children:"Logout"})]}):Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(O.b,{to:"/",children:"Home"}),Object(k.jsx)(O.b,{to:"/submit",children:"Contribute"}),Object(k.jsx)(O.b,{to:"/login",children:"Login"}),Object(k.jsx)(O.b,{to:"/signup",children:"Signup"})]})})]})})},C=n.p+"static/media/Blackanese.f76119c8.mp3",_=function(){return Object(k.jsxs)("footer",{className:"w-100 mt-auto p-4",children:[Object(k.jsx)("audio",{id:"player",allow:"autoplay",loop:!0,controls:!0,children:Object(k.jsx)("source",{src:C,type:"audio/mpeg"})}),Object(k.jsx)("br",{}),Object(k.jsx)("div",{className:"text-center",children:"\xa92021 Furious 6ix"})]})},T=n(11),I=n(8),$=n.n(I),D=n(14),A=n(74),L=300,M=5,E=.2,B=300,W=function(e){var t=window.getComputedStyle(e),n=t.getPropertyValue("width"),r=Number(n.split("px")[0]),a=t.getPropertyValue("height");return{x:r,y:Number(a.split("px")[0])}},U=function(e,t){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2))},q=function(){var e=Object(D.a)($.a.mark((function e(t,n){var r,a,c,i,s,o,u,l,d,j,b=arguments;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=b.length>2&&void 0!==b[2]&&b[2],a=H(t),c=W(document.body),i=U(c.x,c.y),s=U(n.x,n.y),o=i/s,u=i/s,l=Y(n.x*u+a.x,-n.y*u+a.y),d="",j=200,t.style.transition=r?"ease "+o+"s":"ease-out "+o+"s",d=0===Q(t)?K((Math.random()-.5)*j):Q(t)>0?K(Math.random()*j/2+Q(t)):K((Math.random()-1)*j/2+Q(t)),t.style.transform=l+d,e.next=15,A(1e3*o);case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),F=function(e){e.style.transition=L+"ms";var t=H(e),n=Y(t.x*-E,t.y*-E),r=K(Q(e)*-E);e.style.transform=n+r,setTimeout((function(){e.style.transform="none"}),.75*L),setTimeout((function(){e.style.transition="10ms"}),L)},P=function(e){return Math.abs(e.x)>Math.abs(e.y)?e.x>0?"right":"left":e.y>0?"up":"down"},R=function(e,t){var n=t.x-e.x,r=e.y-t.y,a=(t.time-e.time)/1e3;return{x:n/a,y:r/a}},Y=function(e,t){return"translate("+e+"px, "+t+"px)"},K=function(e){return"rotate("+e+"deg)"},H=function(e){var t=window.getComputedStyle(e),n=new WebKitCSSMatrix(t.webkitTransform);return{x:n.m41,y:n.m42}},Q=function(e){var t=window.getComputedStyle(e),n=new WebKitCSSMatrix(t.webkitTransform);return-Math.asin(n.m21)/(2*Math.PI)*360},X=function(e,t,n,r){var a={x:e.x+n.x,y:e.y+n.y},c={x:a.x,y:a.y,time:(new Date).getTime()},i=Y(a.x,a.y),s=R(r,c).x/1e3,o=K(s*M);return t.style.transform=i+o,c},z=function(e){var t=e.targetTouches[0];return{x:t.clientX,y:t.clientY}},J=function(e){return{x:e.clientX,y:e.clientY}},V=u.a.forwardRef((function(e,t){var n,r=e.flickOnSwipe,a=void 0===r||r,c=e.children,i=e.onSwipe,s=e.onCardLeftScreen,o=e.className,l=e.preventSwipe,d=void 0===l?[]:l,j=u.a.useRef(!1);u.a.useImperativeHandle(t,(function(){return{swipe:function(){var e=arguments;return Object(D.a)($.a.mark((function t(){var r,a,c;return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.length>0&&void 0!==e[0]?e[0]:"right",i&&i(r),a=1e3,c=100*(Math.random()-.5),"right"!==r){t.next=9;break}return t.next=7,q(n,{x:a,y:c},!0);case 7:t.next=22;break;case 9:if("left"!==r){t.next=14;break}return t.next=12,q(n,{x:-a,y:c},!0);case 12:t.next=22;break;case 14:if("up"!==r){t.next=19;break}return t.next=17,q(n,{x:c,y:a},!0);case 17:t.next=22;break;case 19:if("down"!==r){t.next=22;break}return t.next=22,q(n,{x:c,y:-a},!0);case 22:n.style.display="none",s&&s(r);case 24:case"end":return t.stop()}}),t)})))()}}}));var b=u.a.useCallback(function(){var e=Object(D.a)($.a.mark((function e(t,n){var r;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!j.current){e.next=2;break}return e.abrupt("return");case 2:if(j.current=!0,!(Math.abs(n.x)>B||Math.abs(n.y)>B)){e.next=13;break}if(r=P(n),i&&i(r),!a){e.next=13;break}if(d.includes(r)){e.next=13;break}return e.next=10,q(t,n);case 10:return t.style.display="none",s&&s(r),e.abrupt("return");case 13:F(t);case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[j,a,i,s,d]),h=u.a.useCallback((function(){j.current=!1}),[j]),m=u.a.useCallback((function(e){if(e){n=e;var t={x:null,y:null},r={x:0,y:0},a={x:0,y:0,time:(new Date).getTime()},c=!1;e.addEventListener("touchstart",(function(e){e.preventDefault(),h(),t={x:-z(e).x,y:-z(e).y}})),e.addEventListener("mousedown",(function(e){e.preventDefault(),c=!0,h(),t={x:-J(e).x,y:-J(e).y}})),e.addEventListener("touchmove",(function(n){n.preventDefault();var c=X(z(n),e,t,a);r=R(a,c),a=c})),e.addEventListener("mousemove",(function(n){if(n.preventDefault(),c){var i=X(J(n),e,t,a);r=R(a,i),a=i}})),e.addEventListener("touchend",(function(t){t.preventDefault(),b(e,r)})),e.addEventListener("mouseup",(function(t){c&&(t.preventDefault(),c=!1,b(e,r))})),e.addEventListener("mouseleave",(function(t){c&&(t.preventDefault(),c=!1,b(e,r))}))}}),[b,h]);return u.a.createElement("div",{ref:m,className:o},c)})),G=n(89),Z=n(18),ee=n(27),te=Object(ee.a)(r||(r=Object(Z.a)(["\n  query thoughts($username: String) {\n    thoughts(username: $username) {\n      _id\n      thoughtText\n      createdAt\n      username\n      reactionCount\n      reactions {\n        _id\n        createdAt\n        username\n        reactionBody\n      }\n    }\n  }\n"]))),ne=Object(ee.a)(a||(a=Object(Z.a)(["\n  query thought($id: ID!) {\n    thought(_id: $id) {\n      _id\n      thoughtText\n      createdAt\n      username\n      reactionCount\n      reactions {\n        _id\n        createdAt\n        username\n        reactionBody\n      }\n    }\n  }\n"]))),re=Object(ee.a)(c||(c=Object(Z.a)(["\n  query user($username: String!) {\n    user(username: $username) {\n      _id\n      username\n      email\n      friendCount\n      friends {\n        _id\n        username\n      }\n      thoughts {\n        _id\n        thoughtText\n        createdAt\n        reactionCount\n      }\n    }\n  }\n"]))),ae=Object(ee.a)(i||(i=Object(Z.a)(["\n  {\n    me {\n      _id\n      username\n      email\n      friendCount\n      thoughts {\n        _id\n        thoughtText\n        createdAt\n        reactionCount\n        reactions {\n          _id\n          createdAt\n          reactionBody\n          username\n        }\n      }\n      friends {\n        _id\n        username\n      }\n    }\n  }\n"])));Object(ee.a)(s||(s=Object(Z.a)(["\n  {\n    me {\n      _id\n      username\n      email\n      friendCount\n      friends {\n        _id\n        username\n      }\n    }\n  }\n"])));var ce,ie,se,oe,ue,le,de=function(){var e=Object(G.a)(te).data,t=((null===e||void 0===e?void 0:e.thoughts)||[]).map((function(e){return{name:e.username,url:e.thoughtText,id:e._id}})),n=[],r=t,a=Object(o.useState)(t),c=Object(T.a)(a,2),i=(c[0],c[1]),s=Object(o.useState)(),l=Object(T.a)(s,2),d=(l[0],l[1]),j=Object(o.useMemo)((function(){return Array(t.length).fill(0).map((function(e){return u.a.createRef()}))}),[]);return Object(k.jsxs)("div",{id:"cardDivs",children:[Object(k.jsx)("div",{className:"cardContainer",children:t.map((function(e,t){return Object(k.jsx)(V,{ref:j[t],className:"swipe",onSwipe:function(t){return r=t,a=e.name,console.log("removing: "+a),d(r),void n.push(a);var r,a},onCardLeftScreen:function(){return t=e.name,console.log(t+" left the screen!"),r=r.filter((function(e){return e.name!==t})),void i(r);var t},children:Object(k.jsxs)("div",{style:{backgroundImage:"url("+e.url+")"},className:"card",children:[Object(k.jsx)(O.b,{to:"profile/".concat(e.name),children:Object(k.jsxs)("h3",{children:["by ",e.name]})}),Object(k.jsx)(O.b,{to:"thought/".concat(e.id),children:Object(k.jsx)("div",{className:"buttons",children:Object(k.jsx)("button",{className:"button",children:"Comment"})})})]})},e.url)}))}),Object(k.jsx)("br",{}),Object(k.jsx)("br",{}),Object(k.jsx)("div",{className:"textcontainer centered px-3",children:Object(k.jsx)("h3",{className:"infoText",children:"Press play, swipe through the art, comment on what you like, follow artists and submit your own art!"})})]})},je=function(){var e=Object(p.g)().username,t=Object(G.a)(e?re:ae,{variables:{username:e}}),n=(t.loading,t.data),r=((null===n||void 0===n?void 0:n.me)||(null===n||void 0===n||n.user),w.loggedIn());return Object(k.jsx)("main",{children:Object(k.jsx)("div",{className:"centered",children:r?Object(k.jsx)(de,{}):Object(k.jsxs)("div",{className:"textcontainer",children:[Object(k.jsx)("h3",{className:"infoText px-3",children:"Today's Featured Artist and song:"}),Object(k.jsx)("img",{src:"/cover.png",alt:"DJKAZ",style:{width:350}})]})})})},be=n(28),he=n(91),me=Object(ee.a)(ce||(ce=Object(Z.a)(["\n  mutation login($email: String!, $password: String!) {\n    login(email: $email, password: $password) {\n      token\n      user {\n        _id\n        username\n      }\n    }\n  }\n"]))),xe=Object(ee.a)(ie||(ie=Object(Z.a)(["\n  mutation addUser($username: String!, $email: String!, $password: String!) {\n    addUser(username: $username, email: $email, password: $password) {\n      token\n      user {\n        _id\n        username\n      }\n    }\n  }\n"]))),fe=Object(ee.a)(se||(se=Object(Z.a)(["\n  mutation addThought($thoughtText: String!) {\n    addThought(thoughtText: $thoughtText) {\n      _id\n      thoughtText\n      createdAt\n      username\n      reactionCount\n      reactions {\n        _id\n      }\n    }\n  }\n"]))),Oe=Object(ee.a)(oe||(oe=Object(Z.a)(["\n  mutation addReaction($thoughtId: ID!, $reactionBody: String!) {\n    addReaction(thoughtId: $thoughtId, reactionBody: $reactionBody) {\n      _id\n      reactionCount\n      reactions {\n        _id\n        reactionBody\n        createdAt\n        username\n      }\n    }\n  }\n"]))),pe=Object(ee.a)(ue||(ue=Object(Z.a)(["\n  mutation addFriend($id: ID!) {\n    addFriend(friendId: $id) {\n      _id\n      username\n      friendCount\n      friends {\n        _id\n        username\n      }\n    }\n  }\n"]))),ve=(Object(ee.a)(le||(le=Object(Z.a)(["\n  mutation removeFriend($id: ID!) {\n    removeFriend(id: $id) {\n      _id\n      username\n      friends {\n        _id\n        username\n      }\n    }\n  }\n"]))),function(e){var t=Object(o.useState)({email:"",password:""}),n=Object(T.a)(t,2),r=n[0],a=n[1],c=Object(he.a)(me),i=Object(T.a)(c,2),s=i[0],u=i[1].error,l=function(e){var t=e.target,n=t.name,c=t.value;a(Object(j.a)(Object(j.a)({},r),{},Object(be.a)({},n,c)))},d=function(){var e=Object(D.a)($.a.mark((function e(t){var n,a;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,s({variables:Object(j.a)({},r)});case 4:n=e.sent,a=n.data,console.log(a),w.login(a.login.token),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(k.jsx)("main",{className:"flex-row justify-center mb-4",children:Object(k.jsx)("div",{className:"col-12 col-md-6",children:Object(k.jsxs)("div",{className:"cardwide",children:[Object(k.jsx)("h4",{className:"card-header",children:"Login"}),Object(k.jsxs)("div",{className:"card-body",children:[Object(k.jsxs)("form",{onSubmit:d,children:[Object(k.jsx)("input",{className:"form-input",placeholder:"Your email",name:"email",type:"email",id:"email",value:r.email,onChange:l}),Object(k.jsx)("input",{className:"form-input",placeholder:"******",name:"password",type:"password",id:"password",value:r.password,onChange:l}),Object(k.jsx)("button",{className:"btn d-block w-100",type:"submit",children:"Submit"})]}),u&&Object(k.jsx)("div",{className:"text-error",children:"Login failed"})]})]})})})}),ge=function(){return Object(k.jsx)("div",{children:"Oops, we couldn't find that page."})},ye=function(e){var t=e.reactions;return Object(k.jsx)("div",{children:Object(k.jsxs)("div",{className:"cardcomments",children:[Object(k.jsx)("br",{}),t&&t.map((function(e){return Object(k.jsxs)("p",{children:[Object(k.jsx)(O.b,{to:"/profile/".concat(e.username),className:"buttons",style:{fontWeight:700},children:Object(k.jsxs)("button",{children:[e.username,":"]})}),e.reactionBody," "," "]},e._id)}))]})})},we=function(e){var t=e.thoughtId,n=Object(o.useState)(""),r=Object(T.a)(n,2),a=r[0],c=r[1],i=Object(o.useState)(0),s=Object(T.a)(i,2),u=s[0],l=s[1],d=Object(he.a)(Oe),j=Object(T.a)(d,2),b=j[0],h=j[1].error,m=function(){var e=Object(D.a)($.a.mark((function e(n){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,b({variables:{reactionBody:a,thoughtId:t}});case 4:c(""),l(0),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(k.jsxs)("div",{children:[Object(k.jsxs)("p",{className:"m-0 ".concat(280===u||h?"text-error":""),children:[u," characters (280 max)",h&&Object(k.jsx)("span",{className:"ml-2",children:"Something went wrong..."})]}),Object(k.jsxs)("form",{className:"flex-row justify-center justify-space-between-md align-stretch",onSubmit:m,children:[Object(k.jsx)("textarea",{placeholder:"Why is this a good (or bad) match for the song?",value:a,className:"form-input col-12",onChange:function(e){e.target.value.length<=280&&(c(e.target.value),l(e.target.value.length))}}),Object(k.jsx)("button",{className:"btn col-12",type:"submit",children:"Submit"})]}),h&&Object(k.jsx)("div",{children:"Something went wrong..."})]})},ke=function(e){var t=Object(p.g)().id,n=Object(G.a)(ne,{variables:{id:t}}),r=n.loading,a=n.data,c=(null===a||void 0===a?void 0:a.thought)||{};return r?Object(k.jsx)("div",{children:"Loading..."}):Object(k.jsxs)("div",{children:[Object(k.jsx)("div",{className:"cardContainer px-3",children:Object(k.jsx)("div",{style:{backgroundImage:"url("+c.thoughtText+")"},className:"card",children:Object(k.jsxs)(O.b,{to:"/profile/".concat(c.username),children:[Object(k.jsx)("br",{}),Object(k.jsxs)("h3",{children:["by ",c.username]})]})})}),w.loggedIn()&&Object(k.jsx)(we,{thoughtId:c._id}),Object(k.jsxs)("h4",{children:[c.reactionCount," comments"]}),c.reactionCount>0&&Object(k.jsx)(ye,{reactions:c.reactions})]})},Ne=function(e){var t=e.thoughts;return t.length?Object(k.jsx)("div",{id:"cardDivs",className:"px-3",children:Object(k.jsx)("div",{className:"cardContainerhorizontal",children:t&&t.map((function(e){return Object(k.jsx)("div",{children:Object(k.jsx)(O.b,{to:"/thought/".concat(e._id),children:Object(k.jsx)("div",{style:{backgroundImage:"url("+e.thoughtText+")"},className:"cardhorizontal",children:Object(k.jsxs)("h3",{children:[e.reactionCount," comments"]})})})},e._id)}))})}):Object(k.jsxs)("div",{children:[Object(k.jsx)("img",{src:"https://media.giphy.com/media/XErx4Alxhy7Uo9D6hX/source.gif",alt:"No contributions",style:{width:350}}),Object(k.jsx)("h3",{children:"No Contributions"})]})},Se=function(e){e.friendCount;var t=e.username,n=e.friends;return n&&n.length?Object(k.jsxs)("div",{children:[Object(k.jsx)("div",{className:"centered px-3",children:Object(k.jsxs)("h6",{children:[t," follows"]})}),Object(k.jsx)("div",{className:"buttons",children:n.map((function(e){return Object(k.jsx)("button",{className:"button",children:Object(k.jsx)(O.b,{to:"/profile/".concat(e.username),children:e.username},e._id)},e._id)}))})]}):Object(k.jsxs)("h5",{children:[t," doesn't follow anyone yet!"]})},Ce=function(e){var t=Object(p.g)().username,n=Object(he.a)(pe),r=Object(T.a)(n,1)[0],a=Object(G.a)(t?re:ae,{variables:{username:t}}),c=a.loading,i=a.data,s=(null===i||void 0===i?void 0:i.me)||(null===i||void 0===i?void 0:i.user)||{};if(w.loggedIn()&&w.getProfile().data.username===t)return Object(k.jsx)(p.a,{to:"/profile"});if(c)return Object(k.jsx)("div",{children:"Loading..."});if(!(null===s||void 0===s?void 0:s.username))return Object(k.jsx)("h4",{children:"You need to be logged in to see this. Use the navigation links above to sign up or log in!"});var o=function(){var e=Object(D.a)($.a.mark((function e(){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r({variables:{id:s._id}});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0);case 8:alert("A shortcut to this profile has been added in your Me page");case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();return Object(k.jsxs)("div",{id:"profilepage",className:"text-center",children:[Object(k.jsx)("div",{children:t&&Object(k.jsxs)("button",{className:"btn ml-auto",onClick:o,children:["Follow ",s.username]})}),Object(k.jsx)("br",{}),Object(k.jsxs)("div",{children:[Object(k.jsx)("div",{children:Object(k.jsx)(Ne,{thoughts:s.thoughts})}),Object(k.jsx)("div",{children:Object(k.jsx)(Se,{username:s.username,friendCount:s.friendCount,friends:s.friends})})]})]})},_e=function(){var e=Object(o.useState)({username:"",email:"",password:""}),t=Object(T.a)(e,2),n=t[0],r=t[1],a=Object(he.a)(xe),c=Object(T.a)(a,2),i=c[0],s=c[1].error,u=function(e){var t=e.target,a=t.name,c=t.value;r(Object(j.a)(Object(j.a)({},n),{},Object(be.a)({},a,c)))},l=function(){var e=Object(D.a)($.a.mark((function e(t){var r,a;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,i({variables:Object(j.a)({},n)});case 4:r=e.sent,a=r.data,console.log(a),w.login(a.addUser.token),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(k.jsx)("main",{className:"flex-row justify-center mb-4",children:Object(k.jsx)("div",{className:"col-12 col-md-6",children:Object(k.jsxs)("div",{className:"cardwide",children:[Object(k.jsx)("h4",{className:"card-header",children:"Sign Up"}),Object(k.jsxs)("div",{className:"card-body",children:[Object(k.jsxs)("form",{onSubmit:l,children:[Object(k.jsx)("input",{className:"form-input",placeholder:"Your username",name:"username",type:"username",id:"username",value:n.username,onChange:u}),Object(k.jsx)("input",{className:"form-input",placeholder:"Your email",name:"email",type:"email",id:"email",value:n.email,onChange:u}),Object(k.jsx)("input",{className:"form-input",placeholder:"******",name:"password",type:"password",id:"password",value:n.password,onChange:u}),Object(k.jsx)("button",{className:"btn d-block w-100",type:"submit",children:"Submit"})]}),s&&Object(k.jsx)("div",{children:"Sign up failed"})]})]})})})},Te=n(47),Ie=function(){var e=Object(o.useState)(""),t=Object(T.a)(e,2),n=t[0],r=t[1],a=Object(o.useState)(0),c=Object(T.a)(a,2),i=c[0],s=c[1],u=Object(he.a)(fe,{update:function(e,t){var n=t.data.addThought;try{var r=e.readQuery({query:te}).thoughts;e.writeQuery({query:te,data:{thoughts:[n].concat(Object(Te.a)(r))}})}catch(c){console.error(c)}var a=e.readQuery({query:ae}).me;e.writeQuery({query:ae,data:{me:Object(j.a)(Object(j.a)({},a),{},{thoughts:[].concat(Object(Te.a)(a.thoughts),[n])})}})}}),l=Object(T.a)(u,2),d=l[0],b=l[1].error,h=function(){var e=Object(D.a)($.a.mark((function e(t){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,d({variables:{thoughtText:n}});case 4:r(""),s(0),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0);case 11:alert("We got it, thank you!");case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(k.jsxs)("main",{className:"flex-row justify-center mb-4",children:[Object(k.jsx)("div",{className:"col-8 col-md-6",children:Object(k.jsxs)("div",{className:"cardwide",children:[Object(k.jsx)("h4",{className:"card-header",children:"Contribute"}),Object(k.jsxs)("div",{className:"card-body",children:[Object(k.jsx)("p",{className:"m-0 ".concat(280===i||b?"text-error":""),children:b&&Object(k.jsx)("span",{className:"ml-2",children:"Something went wrong..."})}),Object(k.jsxs)("form",{onSubmit:h,children:[Object(k.jsx)("textarea",{placeholder:"Enter the URL of a picture.",value:n,className:"form-input",onChange:function(e){e.target.value.length<=280&&(r(e.target.value),s(e.target.value.length))}}),Object(k.jsx)("button",{className:"btn d-block w-100",type:"submit",children:"Submit"})]})]})]})}),Object(k.jsxs)("div",{className:"centered px-3",children:[Object(k.jsx)("br",{}),"Make sure that you have permission to use that picture!"]})]})},$e=function(){var e=w.loggedIn();return Object(k.jsx)("main",{children:Object(k.jsx)("div",{className:"flex-row justify-space-between",children:e?Object(k.jsx)("div",{className:"col-12 mb-3",children:Object(k.jsx)(Ie,{})}):Object(k.jsx)("div",{className:"col-12 mb-3",children:Object(k.jsx)("h3",{children:"Please login or sign up to contribute"})})})})},De=Object(b.a)({uri:"/graphql"}),Ae=Object(f.a)((function(e,t){var n=t.headers,r=localStorage.getItem("id_token");return{headers:Object(j.a)(Object(j.a)({},n),{},{authorization:r?"Bearer ".concat(r):""})}})),Le=new h.a({link:Ae.concat(De),cache:new m.a});var Me=function(){return Object(k.jsx)(x.a,{client:Le,children:Object(k.jsx)(O.a,{children:Object(k.jsxs)("div",{className:"flex-column justify-flex-start min-100-vh",children:[Object(k.jsx)(S,{}),Object(k.jsx)("div",{className:"container",children:Object(k.jsxs)(p.d,{children:[Object(k.jsx)(p.b,{exact:!0,path:"/",component:je}),Object(k.jsx)(p.b,{exact:!0,path:"/login",component:ve}),Object(k.jsx)(p.b,{exact:!0,path:"/signup",component:_e}),Object(k.jsx)(p.b,{exact:!0,path:"/profile/:username?",component:Ce}),Object(k.jsx)(p.b,{exact:!0,path:"/thought/:id",component:ke}),Object(k.jsx)(p.b,{exact:!0,path:"/submit",component:$e}),Object(k.jsx)(p.b,{component:ge})]})}),Object(k.jsx)(_,{})]})})})},Ee=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Be(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}d.a.render(Object(k.jsx)(u.a.StrictMode,{children:Object(k.jsx)(Me,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");Ee?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Be(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Be(t,e)}))}}()}},[[76,1,2]]]);
//# sourceMappingURL=main.6c302808.chunk.js.map